# Тестирование навигации на основе ID

## Что было исправлено

1. **Переделана логика подсветки** - теперь используется уникальный `route.id` вместо сопоставления по URL
2. **Исправлена установка ID** - теперь все маршруты в древовидной структуре имеют уникальные ID
3. **Улучшено автоматическое разворачивание групп** - поиск групп теперь основан на ID маршрутов
4. **Добавлены отладочные логи** - для диагностики работы подсветки

## Как протестировать

1. Откройте приложение в браузере: http://localhost:5173
2. Откройте консоль разработчика (F12)
3. Кликните на любой маршрут в правой панели "On This Page"
4. Проверьте в консоли сообщения:
   - `Auto-expanding groups (ID-based)` - показывает найденные группы для разворачивания
   - `Groups expanded, new expandedGroups` - показывает развернутые группы
   - `Route is active (ID-based)` - показывает активный маршрут
   - `Group is active (ID-based)` - показывает активную группу

## Ожидаемое поведение

✅ При клике на маршрут в правой панели:

- Соответствующий маршрут в левой навигации подсвечивается синим цветом
- Группа, содержащая маршрут, автоматически разворачивается
- В консоли появляются отладочные сообщения с правильными ID

✅ При переходе к конкретному маршруту через URL (например, `/route/123`):

- Маршрут с ID 123 подсвечивается в левой навигации
- Его группа автоматически разворачивается

## Ключевые изменения в коде

### TreeGroup.vue

- `isRouteActive()` теперь использует `route.id` напрямую
- `isGroupActive()` рекурсивно ищет маршрут по ID в группе
- `scrollToRoute()` передает `route.id` напрямую

### SiteNavigation.vue

- Автоматическое разворачивание групп основано на поиске по ID
- Добавлена рекурсивная функция поиска групп, содержащих маршрут

### api-doc.ts (store)

- Добавлена функция `assignIdsToTreeRoutes()` для установки ID в древовидной структуре
- Обновлен `groupRouteHandler()` для сохранения существующих ID

## Отладка

Если подсветка не работает, проверьте в консоли:

1. Есть ли сообщения об ошибках?
2. Правильно ли устанавливается `selectedRouteId`?
3. Находятся ли группы с маршрутом?
4. Правильно ли сравниваются ID маршрутов?
