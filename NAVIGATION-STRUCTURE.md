# Структура навигации API Documentation

## Обзор

Приложение использует трехколоночный layout, вдохновленный документацией Prisma:

```
┌─────────────────────────────────────────────────────────┐
│                     Header (ApiHeader)                   │
├──────────┬────────────────────────────┬──────────────────┤
│          │                            │                  │
│   Left   │      Main Content          │   Right Panel    │
│  Sidebar │                            │  (On This Page)  │
│          │                            │                  │
│ (Groups  │   API Groups & Routes      │  - Table of      │
│  & Routes│   Details                  │    Contents      │
│  Tree)   │                            │  - Active        │
│          │                            │    Section       │
│          │                            │    Highlight     │
│          │                            │                  │
└──────────┴────────────────────────────┴──────────────────┘
```

## Компоненты

### 1. **SiteNavigation.vue** (Левая панель)

**Расположение:** Слева, фиксированная ширина 256px (w-64)

**Функционал:**

- Дерево групп API маршрутов
- Переключатель HTTP / WebSocket
- Разворачивание/сворачивание групп
- Список маршрутов внутри каждой группы
- Навигация с автоскроллом к выбранному маршруту
- Переключатель темной/светлой темы

**Адаптивность:**

- Скрыта на экранах < XL (1280px)
- Видна на экранах XL+ (1280px+)

**Особенности:**

- Компактное дерево с иконками стрелок
- Цветовая индикация HTTP методов (GET, POST, PUT, DELETE и т.д.)
- Подсветка активного элемента
- Счетчик маршрутов для каждой группы

### 2. **OnThisPage.vue** (Правая панель)

**Расположение:** Справа, фиксированная ширина 256px (w-64)

**Функционал:**

- Автоматически генерируемое содержание страницы
- Список всех видимых групп и маршрутов
- Подсветка текущего активного раздела при скролле
- Навигация с автоскроллом к выбранному элементу
- Статистика (количество групп и маршрутов)

**Адаптивность:**

- Скрыта на экранах < 2XL (1536px)
- Видна на экранах 2XL+ (1536px+)

**Особенности:**

- Использует IntersectionObserver для отслеживания активного раздела
- Двухуровневая структура (группы → маршруты)
- Цветовая индикация HTTP методов

### 3. **MobileNavigation.vue** (Мобильное меню)

**Расположение:** Выдвижная панель слева

**Функционал:**

- Кнопка гамбургер-меню в левом верхнем углу
- Выдвижное меню с полным деревом навигации
- Переключатель HTTP / WebSocket
- Дерево групп и маршрутов (как в SiteNavigation)
- Переключатель темы
- Автозакрытие при выборе маршрута

**Адаптивность:**

- Видна только на экранах < XL (1280px)
- Полноценная замена левой панели для мобильных устройств

### 4. **ApiGroup.vue** (Основной контент)

**Обновления:**

- Добавлены ID для групп: `id="group-{groupIndex}"`
- Добавлен класс `scroll-mt-24` для корректного скролла с учетом header

### 5. **ApiRoute.vue** (Основной контент)

**Обновления:**

- ID устанавливается родителем через атрибут `id="route-{groupIndex}-{routeIndex}"`
- Добавлен класс `scroll-mt-24` для корректного скролла

## Адаптивные брейкпоинты

| Размер экрана  | Левая панель | Правая панель | Мобильное меню |
| -------------- | ------------ | ------------- | -------------- |
| < XL (1280px)  | ❌ Скрыта    | ❌ Скрыта     | ✅ Показано    |
| XL+ (1280px+)  | ✅ Показана  | ❌ Скрыта     | ❌ Скрыто      |
| 2XL+ (1536px+) | ✅ Показана  | ✅ Показана   | ❌ Скрыто      |

## Функционал навигации

### Скролл к элементам

Все компоненты навигации используют единую систему скролла:

```typescript
const scrollToRoute = (groupIndex: number, routeIndex: number) => {
  const element = document.getElementById(`route-${groupIndex}-${routeIndex}`)
  if (element) {
    const mainContent = document.querySelector('main')
    if (mainContent) {
      const elementTop = element.offsetTop
      mainContent.scrollTo({
        top: elementTop - 100, // Отступ для header
        behavior: 'smooth',
      })
    }
  }
}
```

### Отслеживание активного раздела

Компонент **OnThisPage** использует IntersectionObserver:

```typescript
const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
        activeId.value = entry.target.id
      }
    })
  },
  {
    root: mainContent,
    rootMargin: '-20% 0px -70% 0px',
    threshold: [0, 0.5, 1],
  },
)
```

## Стили и оформление

### Цветовая схема HTTP методов

```typescript
const getMethodColor = (method: string) => {
  const colors = {
    GET: 'text-green-600 dark:text-green-400',
    POST: 'text-blue-600 dark:text-blue-400',
    PUT: 'text-yellow-600 dark:text-yellow-400',
    PATCH: 'text-orange-600 dark:text-orange-400',
    DELETE: 'text-red-600 dark:text-red-400',
  }
  return colors[method] || 'text-gray-600 dark:text-gray-400'
}
```

### Плавная прокрутка

```css
html {
  scroll-behavior: smooth;
}

.scroll-mt-24 {
  scroll-margin-top: 6rem; /* Отступ для фиксированного header */
}
```

### Кастомные скроллбары

- Тонкие скроллбары (10px)
- Темная/светлая тема
- Плавные переходы

## Улучшения UX

1. **Плавная навигация:** Автоматический скролл к выбранному элементу с анимацией
2. **Визуальная обратная связь:** Подсветка активного элемента во всех панелях
3. **Компактность:** Эффективное использование пространства экрана
4. **Accessibility:** Семантичная разметка, поддержка клавиатурной навигации
5. **Производительность:** Оптимизированный рендеринг с использованием IntersectionObserver

## Технологии

- **Vue 3** Composition API
- **TypeScript**
- **Tailwind CSS** для стилизации
- **Pinia** для управления состоянием
- **IntersectionObserver API** для отслеживания видимости элементов
